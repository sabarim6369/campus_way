
<div class="login-container">
  <div class="container">
    <div class="welcome-box">
      <h1 data-translate="welcome">Welcome!</h1>
      <p data-translate="createAccount">Create an account to start your journey with us. Sign up and explore the exciting features and benefits we have to offer.</p>
    </div>

    <div class="signup-box">
      <!-- Placeholder for displaying dynamic messages -->
      <div id="message-box"></div>

      <form id="signupForm" action="/signup" method="POST">
        <h2 data-translate="signUp">Sign Up</h2>
        <input type="text" placeholder="Username" name="name" id="username" data-placeholder="username">
        <input type="email" placeholder="Email" name="email" id="email" data-placeholder="email">
        <input type="password" placeholder="Password" name="password" id="password" data-placeholder="password">
        <input type="password" placeholder="Confirm Password" name="confirmpassword" id="confirmpassword" data-placeholder="confirmPassword">
        <button type="submit" data-translate="signUp">Sign Up</button>
      </form>

      <button class="google-btn" data-translate="continueWithGoogle">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Google_%22G%22_Logo.svg/512px-Google_%22G%22_Logo.svg.png" alt="Google Logo">
        Continue with Google
      </button>
      <p data-translate="alreadyHaveAccount">Already have an account?</p> <a href="/login" data-translate="login">Login</a> 
    </div>
  </div>

  <script>
    function changeLanguage(language) {
      document.querySelectorAll("[data-translate]").forEach(function(element) {
        const key = element.getAttribute("data-translate");
        element.textContent = translations[language][key];
      });

      document.querySelectorAll("[data-placeholder]").forEach(function(element) {
        const key = element.getAttribute("data-placeholder");
        element.placeholder = translations[language][key];
      });
    }

    const translations = {
      "en": {
        "welcome": "Welcome!",
        "createAccount": "Create an account to start your journey with us. Sign up and explore the exciting features and benefits we have to offer.",
        "signUp": "Sign Up",
        "username": "Username",
        "email": "Email",
        "password": "Password",
        "confirmPassword": "Confirm Password",
        "continueWithGoogle": "Continue with Google",
        "alreadyHaveAccount": "Already have an account?",
        "login":"Login"
      },
      "ta": {
        "welcome": "வரவேற்கிறோம்!",
        "createAccount": "எங்களுடன் உங்கள் பயணத்தைத் தொடங்க ஒரு கணக்கை உருவாக்குங்கள். உள்நுழைந்து, நாங்கள் வழங்கும் அதிரடி அம்சங்களையும் நன்மைகளையும் கண்டறியுங்கள்.",
        "signUp": "பதிவு செய்க",
        "username": "பயனர்பெயர்",
        "email": "மின்னஞ்சல்",
        "password": "கடவுச்சொல்",
        "confirmPassword": "கடவுச்சொல்லை உறுதிப்படுத்தவும்",
        "continueWithGoogle": "Google-ஐ பயன்படுத்தி தொடரவும்",
        "alreadyHaveAccount": "ஏற்கனவே ஒரு கணக்கு உள்ளதா?",
        "login":" உள்நுழைக",
      },
      "hi": {
        "welcome": "स्वागत है!",
        "createAccount": "हमारे साथ अपनी यात्रा शुरू करने के लिए एक खाता बनाएँ। साइन अप करें और हमारे पास मौजूद रोमांचक विशेषताओं और लाभों का अन्वेषण करें।",
        "signUp": "साइन अप करें",
        "username": "उपयोगकर्ता नाम",
        "email": "ईमेल",
        "password": "पासवर्ड",
        "confirmPassword": "पासवर्ड की पुष्टि करें",
        "continueWithGoogle": "Google के साथ जारी रखें",
        "alreadyHaveAccount": "पहले से ही एक खाता है?",
        "login":"लॉगिन करें"
      },
      "te": {
        "welcome": "స్వాగతం!",
        "createAccount": "మాతో మీ ప్రయాణాన్ని ప్రారంభించడానికి ఖాతాను సృష్టించండి. సైన్ అప్ చేసి, మేము అందించే ఆసక్తికరమైన ఫీచర్లను మరియు ప్రయోజనాలను అన్వేషించండి.",
        "signUp": "సైన్ అప్",
        "username": "వినియోగదారుడి పేరు",
        "email": "ఈమెయిల్",
        "password": "పాస్వర్డ్",
        "confirmPassword": "పాస్వర్డ్ని నిర్ధారించండి",
        "continueWithGoogle": "Googleతో కొనసాగించండి",
        "alreadyHaveAccount": "ఇప్పటికే ఖాతా ఉన్నది? లాగిన్",
        "login":" లాగిన్"
      },
      "ml": {
        "welcome": "സ്വാഗതം!",
        "createAccount": "ഞങ്ങളോടൊപ്പം നിങ്ങളുടെ യാത്ര ആരംഭിക്കാൻ ഒരു അക്കൗണ്ട് സൃഷ്ടിക്കുക. സൈൻ അപ്പ് ചെയ്ത് ഞങ്ങളുടെ വ്യത്യസ്തമായ സവിശേഷതകളും ആനുകൂല്യങ്ങളും പരിശോധിക്കുക.",
        "signUp": "സൈൻ അപ്പ്",
        "username": "ഉപയോക്തൃ നാമം",
        "email": "ഇമെയിൽ",
        "password": "പാസ്വേഡ്",
        "confirmPassword": "പാസ്വേഡ് സ്ഥിരീകരിക്കുക",
        "continueWithGoogle": "Google ഉപയോഗിച്ച്",
        "login":"തുടരുക"
      }
    };

    document.getElementById('signupForm').addEventListener('submit', function(event) {
      const username = document.getElementById('username').value;
      const email = document.getElementById('email').value;
      const password = document.getElementById('password').value;
      const confirmpassword = document.getElementById('confirmpassword').value;

      // Validate fields before submission
      if (!username || !email || !password || !confirmpassword) {
        showMessage('Please fill out all fields.', 'error');
        event.preventDefault();
        return;
      }

      if (password !== confirmpassword) {
        showMessage('Passwords do not match.', 'error');
        event.preventDefault();
        return;
      }

      if (password.length < 8) {
        showMessage('Password must be at least 8 characters long.', 'error');
        event.preventDefault();
        return;
      }

      if (!validateEmail(email)) {
        showMessage('Please enter a valid email address.', 'error');
        event.preventDefault();
        return;
      }
    });

    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(String(email).toLowerCase());
    }
     function getCookie(name) {
            const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
            return match ? decodeURIComponent(match[2]) : null;
        }

        document.addEventListener('DOMContentLoaded', function() {
            const language = getCookie('preferredLanguage') || 'en'; // Default to 'en' if no cookie is set
            changeLanguage(language);
        });

    function showMessage(message, type) {
      const messageBox = document.getElementById('message-box');
      messageBox.innerHTML = ''; // Clear previous messages
      messageBox.textContent = message;
      messageBox.className = type === 'error' ? 'error-message' : 'success-message';
      messageBox.style.display = 'block'; // Show the message box

      // Hide the message after 3 seconds
      setTimeout(() => {
        messageBox.style.display = 'none';
      }, 3000);
    }
   function readOutText(text) {
    const speech = new SpeechSynthesisUtterance(text);
    speech.lang = 'en'; 
    window.speechSynthesis.speak(speech);
}

function setupReadOut() {
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        element.addEventListener('click', () => {
            const text = element.textContent || element.getAttribute('data-translate');
            readOutText(text);
        });
    });
}

document.addEventListener('DOMContentLoaded', setupReadOut);

    // Check if there's an error message from the server side
    {{#if error}}
    showMessage('{{error}}', 'error');
    {{/if}}

    {{#if success}}
    showMessage('{{success}}', 'success');
    {{/if}}
  </script>
</body>
